<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Sound-Reactive Particles</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/addons/p5.sound.min.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
  <script>
    let song;
    let fft;
    let particles = [];

    function preload() {
      // Replace with any online .mp3 file
      song = loadSound('Songz/Maestro Chives, Egzod, Neoni - Royalty [NCS Release].mp3', () => {
        console.log('Song loaded successfully');
      }, () => {
        console.error('Error loading song');
      });
    }

    function setup() {
      createCanvas(windowWidth, windowHeight);
      noStroke();
      fft = new p5.FFT();
      song.loop(); // Play and loop audio
      for (let i = 0; i < 100; i++) {
        particles.push(new Particle());
      }
    }

    function draw() {
      background(20, 20, 30, 80);
      let spectrum = fft.analyze();
      let amp = fft.getEnergy("bass");

      for (let p of particles) {
        p.update(amp);
        p.show();
      }
    }

    class Particle {
      constructor() {
        this.x = random(width);
        this.y = random(height);
        this.r = random(2, 6);
        this.speed = random(0.5, 2);
        this.color = color(random(100,255), random(100,255), 255, 150);
      }

      update(amp) {
        let level = map(amp, 0, 255, 1, 10);
        this.y -= this.speed * level;
        if (this.y < 0) this.y = height;
      }

      show() {
        fill(this.color);
        ellipse(this.x, this.y, this.r * 2);
      }
    }
  </script>
</body>
</html>
